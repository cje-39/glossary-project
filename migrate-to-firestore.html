<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LocalStorage â†’ Firestore ë§ˆì´ê·¸ë ˆì´ì…˜</title>
    <style>
        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            margin-bottom: 10px;
        }
        .subtitle {
            color: #666;
            margin-bottom: 30px;
        }
        .section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }
        .section h2 {
            margin-top: 0;
            color: #333;
            font-size: 1.2em;
        }
        .status {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            font-size: 14px;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        .data-preview {
            background: white;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
            border: 1px solid #ddd;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
        }
        .count {
            font-weight: bold;
            color: #007bff;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”„ LocalStorage â†’ Firestore ë§ˆì´ê·¸ë ˆì´ì…˜</h1>
        <p class="subtitle">ê¸°ì¡´ ë¸Œë¼ìš°ì € ë°ì´í„°ë¥¼ Firestoreë¡œ ì—…ë¡œë“œí•©ë‹ˆë‹¤</p>

        <!-- ìš©ì–´ì§‘ ë°ì´í„° -->
        <div class="section">
            <h2>ğŸ“ ìš©ì–´ì§‘ ë°ì´í„°</h2>
            <div id="glossaryStatus" class="status info">í™•ì¸ ì¤‘...</div>
            <div id="glossaryPreview" class="data-preview" style="display: none;"></div>
            <button id="migrateGlossaryBtn" onclick="migrateGlossary()" disabled>ë§ˆì´ê·¸ë ˆì´ì…˜</button>
            <button onclick="checkGlossary()">ë°ì´í„° í™•ì¸</button>
        </div>

        <!-- ì½”í¼ìŠ¤ ë°ì´í„° -->
        <div class="section">
            <h2>ğŸ“– ì½”í¼ìŠ¤ ë°ì´í„°</h2>
            <div id="corpusStatus" class="status info">í™•ì¸ ì¤‘...</div>
            <div id="corpusPreview" class="data-preview" style="display: none;"></div>
            <button id="migrateCorpusBtn" onclick="migrateCorpus()" disabled>ë§ˆì´ê·¸ë ˆì´ì…˜</button>
            <button onclick="checkCorpus()">ë°ì´í„° í™•ì¸</button>
        </div>

        <!-- í† ë¡  ë°ì´í„° -->
        <div class="section">
            <h2>ğŸ’¬ í† ë¡  ë°ì´í„°</h2>
            <div id="discussionStatus" class="status info">í™•ì¸ ì¤‘...</div>
            <div id="discussionPreview" class="data-preview" style="display: none;"></div>
            <button id="migrateDiscussionBtn" onclick="migrateDiscussion()" disabled>ë§ˆì´ê·¸ë ˆì´ì…˜</button>
            <button onclick="checkDiscussion()">ë°ì´í„° í™•ì¸</button>
        </div>

        <!-- ì „ì²´ ë§ˆì´ê·¸ë ˆì´ì…˜ -->
        <div class="section">
            <h2>ğŸš€ ì „ì²´ ë§ˆì´ê·¸ë ˆì´ì…˜</h2>
            <p>ëª¨ë“  ë°ì´í„°ë¥¼ í•œ ë²ˆì— ë§ˆì´ê·¸ë ˆì´ì…˜í•©ë‹ˆë‹¤.</p>
            <button onclick="migrateAll()" style="background: #28a745; font-size: 16px; padding: 15px 30px;">ì „ì²´ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰</button>
        </div>
    </div>

    <!-- Firebase SDK v8 (CDN í˜¸í™˜, body ëì— ë°°ì¹˜) -->
    <script>
        // ìŠ¤í¬ë¦½íŠ¸ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ë¡œë“œ
        function loadScript(src) {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = src;
                script.onload = resolve;
                script.onerror = () => reject(new Error(`ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì‹¤íŒ¨: ${src}`));
                document.head.appendChild(script);
            });
        }

        // Firebase ì´ˆê¸°í™” í•¨ìˆ˜
        async function initializeFirebase() {
            try {
                // Firebase SDK ìˆœì°¨ ë¡œë“œ
                console.log('Firebase SDK ë¡œë”© ì‹œì‘...');
                await loadScript('https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js');
                console.log('firebase-app.js ë¡œë“œ ì™„ë£Œ');
                
                await loadScript('https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js');
                console.log('firebase-firestore.js ë¡œë“œ ì™„ë£Œ');
                
                await loadScript('firebase-init.js');
                console.log('firebase-init.js ë¡œë“œ ì™„ë£Œ');

                // Firebase SDKê°€ ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸
                if (typeof firebase === 'undefined') {
                    throw new Error('Firebase SDKê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                }

                // Firebase ì´ˆê¸°í™”
                await initFirebase();
                console.log('Firebase ì´ˆê¸°í™” ì™„ë£Œ');

                // ìƒíƒœ ì—…ë°ì´íŠ¸
                document.querySelectorAll('.status.info').forEach(el => {
                    el.textContent = 'âœ… Firebase ì—°ê²° ì™„ë£Œ';
                    el.className = 'status success';
                });

                // ë°ì´í„° í™•ì¸
                checkGlossary();
                checkCorpus();
                checkDiscussion();
            } catch (error) {
                console.error('Firebase ì´ˆê¸°í™” ì˜¤ë¥˜:', error);
                document.querySelectorAll('.status.info').forEach(el => {
                    el.textContent = 'âŒ Firebase ì—°ê²° ì‹¤íŒ¨: ' + error.message;
                    el.className = 'status error';
                });
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeFirebase);
        } else {
            initializeFirebase();
        }

        // Firebase ì´ˆê¸°í™” í™•ì¸
        function checkFirebaseReady() {
            if (typeof firebase === 'undefined' || typeof FirestoreHelper === 'undefined') {
                throw new Error('Firebase SDKê°€ ì•„ì§ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
            }
        }

        // ìš©ì–´ì§‘ ë°ì´í„° í™•ì¸
        async function checkGlossary() {
            const statusEl = document.getElementById('glossaryStatus');
            const previewEl = document.getElementById('glossaryPreview');
            const btn = document.getElementById('migrateGlossaryBtn');

            try {
                // LocalStorage í™•ì¸
                const localTerms = JSON.parse(localStorage.getItem('glossaryData') || '[]');
                const localCategories = JSON.parse(localStorage.getItem('glossaryCategories') || '[]');

                // Firestore í™•ì¸
                let firestoreTerms = null;
                let firestoreCategories = null;
                if (window.FirestoreHelper) {
                    const termsData = await FirestoreHelper.load('glossary', 'terms');
                    const categoriesData = await FirestoreHelper.load('glossary', 'categories');
                    firestoreTerms = termsData?.terms || null;
                    firestoreCategories = categoriesData?.categories || null;
                }

                const localCount = localTerms.length;
                const firestoreCount = firestoreTerms?.length || 0;
                const localCatCount = localCategories.length;
                const firestoreCatCount = firestoreCategories?.length || 0;

                let status = `LocalStorage: <span class="count">${localCount}ê°œ</span> ìš©ì–´, <span class="count">${localCatCount}ê°œ</span> ì¹´í…Œê³ ë¦¬`;
                if (firestoreCount > 0 || firestoreCatCount > 0) {
                    status += ` | Firestore: <span class="count">${firestoreCount}ê°œ</span> ìš©ì–´, <span class="count">${firestoreCatCount}ê°œ</span> ì¹´í…Œê³ ë¦¬`;
                }

                if (localCount > 0 || localCatCount > 0) {
                    if (firestoreCount === 0 && firestoreCatCount === 0) {
                        statusEl.innerHTML = status + '<br>âš ï¸ Firestoreì— ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤. ë§ˆì´ê·¸ë ˆì´ì…˜ì´ í•„ìš”í•©ë‹ˆë‹¤.';
                        statusEl.className = 'status error';
                        btn.disabled = false;
                    } else if (firestoreCount < localCount || firestoreCatCount < localCatCount) {
                        statusEl.innerHTML = status + '<br>âš ï¸ Firestore ë°ì´í„°ê°€ LocalStorageë³´ë‹¤ ì ìŠµë‹ˆë‹¤. ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ê¶Œì¥í•©ë‹ˆë‹¤.';
                        statusEl.className = 'status error';
                        btn.disabled = false;
                    } else {
                        statusEl.innerHTML = status + '<br>âœ… ë™ê¸°í™” ì™„ë£Œ';
                        statusEl.className = 'status success';
                        btn.disabled = true;
                    }
                } else {
                    statusEl.innerHTML = 'LocalStorageì— ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.';
                    statusEl.className = 'status info';
                    btn.disabled = true;
                }

                if (localCount > 0) {
                    previewEl.innerHTML = `<strong>ìš©ì–´ ì˜ˆì‹œ:</strong><br>${localTerms.slice(0, 3).map(t => `- ${t.kr || t.í•œêµ­ì–´ || ''} / ${t.jp || t.ì¼ë³¸ì–´ || ''}`).join('<br>')}`;
                    previewEl.style.display = 'block';
                }
            } catch (error) {
                statusEl.textContent = 'âŒ í™•ì¸ ì‹¤íŒ¨: ' + error.message;
                statusEl.className = 'status error';
            }
        }

        // ì½”í¼ìŠ¤ ë°ì´í„° í™•ì¸
        async function checkCorpus() {
            const statusEl = document.getElementById('corpusStatus');
            const previewEl = document.getElementById('corpusPreview');
            const btn = document.getElementById('migrateCorpusBtn');

            try {
                checkFirebaseReady();
                const localData = JSON.parse(localStorage.getItem('corpusData') || '[]');
                const localFileGroups = JSON.parse(localStorage.getItem('corpusFileGroups') || '[]');

                let firestoreData = null;
                let firestoreFileGroups = null;
                if (window.FirestoreHelper) {
                    const data = await FirestoreHelper.load('corpus', 'data');
                    const fileGroups = await FirestoreHelper.load('corpus', 'fileGroups');
                    firestoreData = data?.items || null;
                    firestoreFileGroups = fileGroups?.fileGroups || null;
                }

                const localCount = localData.length;
                const firestoreCount = firestoreData?.length || 0;
                const localGroupCount = localFileGroups.length;
                const firestoreGroupCount = firestoreFileGroups?.length || 0;

                let status = `LocalStorage: <span class="count">${localCount}ê°œ</span> í•­ëª©, <span class="count">${localGroupCount}ê°œ</span> íŒŒì¼ ê·¸ë£¹`;
                if (firestoreCount > 0 || firestoreGroupCount > 0) {
                    status += ` | Firestore: <span class="count">${firestoreCount}ê°œ</span> í•­ëª©, <span class="count">${firestoreGroupCount}ê°œ</span> íŒŒì¼ ê·¸ë£¹`;
                }

                if (localCount > 0 || localGroupCount > 0) {
                    if (firestoreCount === 0 && firestoreGroupCount === 0) {
                        statusEl.innerHTML = status + '<br>âš ï¸ Firestoreì— ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤. ë§ˆì´ê·¸ë ˆì´ì…˜ì´ í•„ìš”í•©ë‹ˆë‹¤.';
                        statusEl.className = 'status error';
                        btn.disabled = false;
                    } else if (firestoreCount < localCount || firestoreGroupCount < localGroupCount) {
                        statusEl.innerHTML = status + '<br>âš ï¸ Firestore ë°ì´í„°ê°€ LocalStorageë³´ë‹¤ ì ìŠµë‹ˆë‹¤. ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ê¶Œì¥í•©ë‹ˆë‹¤.';
                        statusEl.className = 'status error';
                        btn.disabled = false;
                    } else {
                        statusEl.innerHTML = status + '<br>âœ… ë™ê¸°í™” ì™„ë£Œ';
                        statusEl.className = 'status success';
                        btn.disabled = true;
                    }
                } else {
                    statusEl.innerHTML = 'LocalStorageì— ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.';
                    statusEl.className = 'status info';
                    btn.disabled = true;
                }

                if (localCount > 0) {
                    previewEl.innerHTML = `<strong>í•­ëª© ì˜ˆì‹œ:</strong><br>${localData.slice(0, 3).map(d => `- ${d.korean || d.í•œêµ­ì–´ || ''} / ${d.japanese || d.ì¼ë³¸ì–´ || ''}`).join('<br>')}`;
                    previewEl.style.display = 'block';
                }
            } catch (error) {
                statusEl.textContent = 'âŒ í™•ì¸ ì‹¤íŒ¨: ' + error.message;
                statusEl.className = 'status error';
            }
        }

        // í† ë¡  ë°ì´í„° í™•ì¸
        async function checkDiscussion() {
            const statusEl = document.getElementById('discussionStatus');
            const previewEl = document.getElementById('discussionPreview');
            const btn = document.getElementById('migrateDiscussionBtn');

            try {
                checkFirebaseReady();
                const localPosts = JSON.parse(localStorage.getItem('discussionPosts') || '[]');
                const localAuthors = JSON.parse(localStorage.getItem('discussionAuthors') || '[]');
                const localCategories = JSON.parse(localStorage.getItem('discussionCategories') || '[]');

                let firestorePosts = null;
                let firestoreAuthors = null;
                let firestoreCategories = null;
                if (window.FirestoreHelper) {
                    const posts = await FirestoreHelper.load('discussion', 'posts');
                    const authors = await FirestoreHelper.load('discussion', 'authors');
                    const categories = await FirestoreHelper.load('discussion', 'categories');
                    firestorePosts = posts?.posts || null;
                    firestoreAuthors = authors?.authors || null;
                    firestoreCategories = categories?.categories || null;
                }

                const localPostCount = localPosts.length;
                const firestorePostCount = firestorePosts?.length || 0;
                const localAuthorCount = localAuthors.length;
                const firestoreAuthorCount = firestoreAuthors?.length || 0;
                const localCatCount = localCategories.length;
                const firestoreCatCount = firestoreCategories?.length || 0;

                let status = `LocalStorage: <span class="count">${localPostCount}ê°œ</span> ê²Œì‹œë¬¼, <span class="count">${localAuthorCount}ê°œ</span> ì‘ì„±ì, <span class="count">${localCatCount}ê°œ</span> ì¹´í…Œê³ ë¦¬`;
                if (firestorePostCount > 0 || firestoreAuthorCount > 0 || firestoreCatCount > 0) {
                    status += ` | Firestore: <span class="count">${firestorePostCount}ê°œ</span> ê²Œì‹œë¬¼, <span class="count">${firestoreAuthorCount}ê°œ</span> ì‘ì„±ì, <span class="count">${firestoreCatCount}ê°œ</span> ì¹´í…Œê³ ë¦¬`;
                }

                if (localPostCount > 0 || localAuthorCount > 0 || localCatCount > 0) {
                    if (firestorePostCount === 0 && firestoreAuthorCount === 0 && firestoreCatCount === 0) {
                        statusEl.innerHTML = status + '<br>âš ï¸ Firestoreì— ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤. ë§ˆì´ê·¸ë ˆì´ì…˜ì´ í•„ìš”í•©ë‹ˆë‹¤.';
                        statusEl.className = 'status error';
                        btn.disabled = false;
                    } else if (firestorePostCount < localPostCount || firestoreAuthorCount < localAuthorCount || firestoreCatCount < localCatCount) {
                        statusEl.innerHTML = status + '<br>âš ï¸ Firestore ë°ì´í„°ê°€ LocalStorageë³´ë‹¤ ì ìŠµë‹ˆë‹¤. ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ê¶Œì¥í•©ë‹ˆë‹¤.';
                        statusEl.className = 'status error';
                        btn.disabled = false;
                    } else {
                        statusEl.innerHTML = status + '<br>âœ… ë™ê¸°í™” ì™„ë£Œ';
                        statusEl.className = 'status success';
                        btn.disabled = true;
                    }
                } else {
                    statusEl.innerHTML = 'LocalStorageì— ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.';
                    statusEl.className = 'status info';
                    btn.disabled = true;
                }

                if (localPostCount > 0) {
                    previewEl.innerHTML = `<strong>ê²Œì‹œë¬¼ ì˜ˆì‹œ:</strong><br>${localPosts.slice(0, 3).map(p => `- ${p.kr || p.term || ''} / ${p.jp || ''}`).join('<br>')}`;
                    previewEl.style.display = 'block';
                }
            } catch (error) {
                statusEl.textContent = 'âŒ í™•ì¸ ì‹¤íŒ¨: ' + error.message;
                statusEl.className = 'status error';
            }
        }

        // ìš©ì–´ì§‘ ë§ˆì´ê·¸ë ˆì´ì…˜
        async function migrateGlossary() {
            const statusEl = document.getElementById('glossaryStatus');
            const btn = document.getElementById('migrateGlossaryBtn');
            
            btn.disabled = true;
            statusEl.textContent = 'â³ ë§ˆì´ê·¸ë ˆì´ì…˜ ì¤‘...';
            statusEl.className = 'status info';

            try {
                checkFirebaseReady();
                const terms = JSON.parse(localStorage.getItem('glossaryData') || '[]');
                const categories = JSON.parse(localStorage.getItem('glossaryCategories') || '[]');

                if (window.FirestoreHelper) {
                    await FirestoreHelper.save('glossary', 'terms', { terms });
                    await FirestoreHelper.save('glossary', 'categories', { categories });
                    statusEl.innerHTML = `âœ… ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ! <span class="count">${terms.length}ê°œ</span> ìš©ì–´, <span class="count">${categories.length}ê°œ</span> ì¹´í…Œê³ ë¦¬`;
                    statusEl.className = 'status success';
                } else {
                    throw new Error('FirestoreHelperë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                statusEl.textContent = 'âŒ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤íŒ¨: ' + error.message;
                statusEl.className = 'status error';
            } finally {
                btn.disabled = false;
                setTimeout(checkGlossary, 1000);
            }
        }

        // ì½”í¼ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜
        async function migrateCorpus() {
            const statusEl = document.getElementById('corpusStatus');
            const btn = document.getElementById('migrateCorpusBtn');
            
            btn.disabled = true;
            statusEl.textContent = 'â³ ë§ˆì´ê·¸ë ˆì´ì…˜ ì¤‘...';
            statusEl.className = 'status info';

            try {
                checkFirebaseReady();
                const data = JSON.parse(localStorage.getItem('corpusData') || '[]');
                const fileGroups = JSON.parse(localStorage.getItem('corpusFileGroups') || '[]');

                if (window.FirestoreHelper) {
                    await FirestoreHelper.save('corpus', 'data', { items: data });
                    await FirestoreHelper.save('corpus', 'fileGroups', { fileGroups });
                    statusEl.innerHTML = `âœ… ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ! <span class="count">${data.length}ê°œ</span> í•­ëª©, <span class="count">${fileGroups.length}ê°œ</span> íŒŒì¼ ê·¸ë£¹`;
                    statusEl.className = 'status success';
                } else {
                    throw new Error('FirestoreHelperë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                statusEl.textContent = 'âŒ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤íŒ¨: ' + error.message;
                statusEl.className = 'status error';
            } finally {
                btn.disabled = false;
                setTimeout(checkCorpus, 1000);
            }
        }

        // í† ë¡  ë§ˆì´ê·¸ë ˆì´ì…˜
        async function migrateDiscussion() {
            const statusEl = document.getElementById('discussionStatus');
            const btn = document.getElementById('migrateDiscussionBtn');
            
            btn.disabled = true;
            statusEl.textContent = 'â³ ë§ˆì´ê·¸ë ˆì´ì…˜ ì¤‘...';
            statusEl.className = 'status info';

            try {
                checkFirebaseReady();
                const posts = JSON.parse(localStorage.getItem('discussionPosts') || '[]');
                const authors = JSON.parse(localStorage.getItem('discussionAuthors') || '[]');
                const categories = JSON.parse(localStorage.getItem('discussionCategories') || '[]');

                if (window.FirestoreHelper) {
                    await FirestoreHelper.save('discussion', 'posts', { posts });
                    await FirestoreHelper.save('discussion', 'authors', { authors });
                    await FirestoreHelper.save('discussion', 'categories', { categories });
                    statusEl.innerHTML = `âœ… ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ! <span class="count">${posts.length}ê°œ</span> ê²Œì‹œë¬¼, <span class="count">${authors.length}ê°œ</span> ì‘ì„±ì, <span class="count">${categories.length}ê°œ</span> ì¹´í…Œê³ ë¦¬`;
                    statusEl.className = 'status success';
                } else {
                    throw new Error('FirestoreHelperë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                statusEl.textContent = 'âŒ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤íŒ¨: ' + error.message;
                statusEl.className = 'status error';
            } finally {
                btn.disabled = false;
                setTimeout(checkDiscussion, 1000);
            }
        }

        // ì „ì²´ ë§ˆì´ê·¸ë ˆì´ì…˜
        async function migrateAll() {
            if (!confirm('ëª¨ë“  ë°ì´í„°ë¥¼ Firestoreë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                return;
            }

            try {
                await migrateGlossary();
                await new Promise(resolve => setTimeout(resolve, 500));
                await migrateCorpus();
                await new Promise(resolve => setTimeout(resolve, 500));
                await migrateDiscussion();
                
                alert('âœ… ì „ì²´ ë§ˆì´ê·¸ë ˆì´ì…˜ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');
            } catch (error) {
                alert('âŒ ë§ˆì´ê·¸ë ˆì´ì…˜ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
            }
        }
    </script>
</body>
</html>
