<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>East translation team Glossary</title>
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>East translation team Glossary</h1>
            <div style="text-align: center; margin-top: 15px;">
                <a href="hub.html" class="btn btn-primary" style="text-decoration: none; display: inline-block; padding: 8px 16px; font-size: 13px;">ğŸ  Main page</a>
            </div>
        </header>

        <!-- ì¹´í…Œê³ ë¦¬ ì¹´ë“œ ë·° -->
        <div id="categoryView" class="category-view">
            <div class="category-toolbar">
                <div class="search-section-main">
                    <div style="display: flex; gap: 12px; align-items: center;">
                        <input type="text" id="categorySearchInput" placeholder="Search here" class="search-input-main" style="flex: 1;">
                        <button id="categorySearchBtn" class="btn-search-main">SEARCH</button>
                    </div>
                    <div id="categoryFilterContainerMain" class="category-filter-container">
                        <!-- ì¹´í…Œê³ ë¦¬ í•„í„° ì²´í¬ë°•ìŠ¤ê°€ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                    </div>
                </div>
            </div>
            <div id="categoryGrid" class="category-grid">
                <!-- ì¹´í…Œê³ ë¦¬ ì¹´ë“œë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
            </div>
            <div style="text-align: right; margin-top: 20px;">
                <button id="addCategoryBtnMain" class="btn btn-secondary category-manage-btn">ì¹´í…Œê³ ë¦¬ ê´€ë¦¬</button>
            </div>
        </div>

        <!-- ìš©ì–´ ëª©ë¡ ë·° (ì¹´í…Œê³ ë¦¬ ì„ íƒ ì‹œ í‘œì‹œ) -->
        <div id="termListView" class="term-list-view" style="display: none;">
            <div class="toolbar" style="position: relative;">
                <button id="backToCategoriesBtn" class="btn-back-arrow" onclick="glossaryManager.showCategoryView()" title="ì¹´í…Œê³ ë¦¬ë¡œ ëŒì•„ê°€ê¸°" style="position: absolute; top: 0; right: 0;">â† Back</button>
                <div class="csv-section">
                    <input type="file" id="csvUploadInput" accept=".csv" style="display: none;">
                    <button id="csvUploadBtn" class="btn btn-csv">CSV ì—…ë¡œë“œ</button>
                    <button id="csvDownloadBtn" class="btn btn-csv">CSV ë‹¤ìš´ë¡œë“œ</button>
                    <button id="deleteSelectedTermsBtn" class="btn btn-danger" style="display: none;">ì„ íƒ í•­ëª© ì‚­ì œ</button>
                </div>
            </div>
            <div class="table-container">
                <table id="glossaryTable" class="glossary-table">
                    <thead>
                        <tr>
                            <th style="width: 40px;">
                                <input type="checkbox" id="selectAllGlossaryCheckbox" title="ì „ì²´ ì„ íƒ">
                            </th>
                            <th>ë²ˆí˜¸</th>
                            <th class="sortable" data-sort="korean">
                                í•œêµ­ì–´
                                <span class="sort-arrow">â†•</span>
                            </th>
                            <th class="sortable" data-sort="japanese">
                                æ—¥æœ¬èª
                                <span class="sort-arrow">â†•</span>
                            </th>
                            <th>ì¹´í…Œê³ ë¦¬</th>
                            <th>ë¹„ê³ </th>
                            <th>ê´€ë¦¬</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <!-- ìš©ì–´ ë°ì´í„°ê°€ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                    </tbody>
                </table>
            </div>
            <div class="pagination">
                <button id="prevBtn" class="btn btn-secondary">ì´ì „</button>
                <span id="pageInfo" class="page-info">1 / 1</span>
                <button id="nextBtn" class="btn btn-secondary">ë‹¤ìŒ</button>
            </div>
        </div>
    </div>

    <!-- ì¹´í…Œê³ ë¦¬ ê´€ë¦¬ ëª¨ë‹¬ -->
    <div id="categoryModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ì¹´í…Œê³ ë¦¬ ê´€ë¦¬</h2>
                <span class="close-category">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="newCategoryInput">ìƒˆ ì¹´í…Œê³ ë¦¬ ì¶”ê°€</label>
                    <div style="display: flex; gap: 10px;">
                        <input type="text" id="newCategoryInput" placeholder="ì˜ˆ: #newgame" style="flex: 1;">
                        <button type="button" id="addCategoryBtn" class="btn btn-primary">ì¶”ê°€</button>
                    </div>
                </div>
                <div class="form-group">
                    <label>ì¹´í…Œê³ ë¦¬ ëª©ë¡</label>
                    <div id="categoryList" class="category-list">
                        <!-- ì¹´í…Œê³ ë¦¬ ëª©ë¡ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="closeCategoryBtn">ë‹«ê¸°</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ìš©ì–´ ì¶”ê°€/ìˆ˜ì • ëª¨ë‹¬ -->
    <div id="termModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">ìš©ì–´ ì¶”ê°€</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="termForm">
                    <input type="hidden" id="termId">
                    <div class="form-group">
                        <label for="koreanInput">í•œêµ­ì–´ *</label>
                        <input type="text" id="koreanInput" required>
                    </div>
                    <div class="form-group">
                        <label for="japaneseInput">ì¼ë³¸ì–´ *</label>
                        <input type="text" id="japaneseInput" required>
                    </div>
                    <div class="form-group">
                        <label>ì¹´í…Œê³ ë¦¬</label>
                        <div id="categoryCheckboxes" class="category-checkboxes">
                            <!-- ì¹´í…Œê³ ë¦¬ ì²´í¬ë°•ìŠ¤ê°€ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                        </div>
                        <button type="button" id="manageCategoriesBtn" class="btn btn-link">ì¹´í…Œê³ ë¦¬ ê´€ë¦¬</button>
                    </div>
                    <div class="form-group">
                        <label for="notesInput">ë¹„ê³ </label>
                        <textarea id="notesInput" rows="3" placeholder="ìš©ì–´ì— ëŒ€í•œ ì„¤ëª…ì´ë‚˜ ì°¸ê³ ì‚¬í•­"></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">ì €ì¥</button>
                        <button type="button" class="btn btn-secondary" id="cancelBtn">ì·¨ì†Œ</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Firebase SDK v8 (CDN í˜¸í™˜) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="firebase-init.js"></script>
    <script>
        // Firebase SDK ë¡œë“œ í›„ app.js ì‹¤í–‰
        (async function() {
            // firebase-init.jsê°€ ë¡œë“œë  ë•Œê¹Œì§€ ëŒ€ê¸°
            let attempts = 0;
            while (typeof waitForFirebaseSDK === 'undefined' && attempts < 50) {
                await new Promise(resolve => setTimeout(resolve, 100));
                attempts++;
            }
            
            try {
                if (typeof waitForFirebaseSDK === 'function') {
                    await waitForFirebaseSDK();
                }
            } catch (error) {
                console.error('Firebase SDK ë¡œë“œ ì‹¤íŒ¨:', error);
            }
            
            // app.js ë¡œë“œ
            const script = document.createElement('script');
            script.src = 'app.js';
            document.body.appendChild(script);
        })();
    </script>
</body>
</html>
